var scrumlib=function(h){var c={version:"1.0.2",jsonUrl:"js/profielen.json",profielen:[],init:function(a){if(!1===c.dependencyChecks())throw Error("Fout: een startvoorwaarde is niet voldaan");null!=localStorage.getItem("profielen")?(c.profielen=JSON.parse(localStorage.getItem("profielen")),console.log("profielen geladen uit localStorage")):c.laadStartProfielen()},speak:function(){return"Scrumlib v"+c.version},laadStartProfielen:function(){c.startProfielen().done(function(a){c.profielen=a;console.log("profielen geladen uit startbestand")}).done(function(a){c.saveProfielenLS()}).fail(function(a){console.log("probleem met laden startProfielen")})},
reset:function(){c.profielen=[];localStorage.removeItem("profielen");c.laadStartProfielen();console.log("profielen worden gereset")},save:function(){c.saveProfielenLS()},dependencyChecks:function(){var a=!0;"undefined"==typeof h&&(console.log("jQuery not defined"),a=!1);window.localStorage||(console.log("localStorage not supported"),a=!1);return a},startProfielen:function(){return h.getJSON(c.jsonUrl).then(function(a){return a})},saveProfielenLS:function(){localStorage.setItem("profielen",JSON.stringify(c.profielen));
console.log("profielen opgeslagen in LS")},getAllProfiles:function(){return c.profielen},getProfileByIndex:function(a){var b=[];if("undefined"!==typeof a&&0<=a&&a<c.profielen.length)b.push(c.profielen[a]);else throw Error("index "+a+" buiten bereik");return b},getIdByEmailPassword:function(a,b){for(var d=!1,e=0;e<c.profielen.length;e++){var f=c.profielen[e];if(f.email==a&&f.wachtwoord==b){d=f._id;break}}return d},getProfilesByProperty:function(a,b,d,e){if("undefined"===typeof e||null===e)e="=";var f=
[];if(""==d)return f;if(c.isArray(a)&&3<=arguments.length&&"undefined"!==typeof b&&""!==b)c.isNumber(d)&&(d=parseFloat(d)),h.each(a,function(a,k){if(k[b]){var g=k[b];c.isNumber(g)&&(g=parseFloat(g));"="==e&&g==d&&f.push(k);"<"==e&&g<d&&f.push(k);"<="==e&&g<=d&&f.push(k);">"==e&&g>d&&f.push(k);">="==e&&g>=d&&f.push(k);"~"==e&&-1!=g.search(new RegExp(d,"i"))&&f.push(k)}else console.log("property '"+b+"' niet gevonden in object")});else throw Error("argumenten prop en val zijn verplicht en mogen niet leeg zijn");
return f},getProfilesByPropertyRegex:function(a,b,d){if("string"!==typeof d)throw Error("deze method accepteert enkel String waarden");var e=[];if(""==d)return e;if(c.isArray(a)&&3==arguments.length&&"undefined"!==typeof b&&""!==b){var f=new RegExp(d);h.each(a,function(a,c){c[b]?-1!=c[b].search(f)&&e.push(c):console.log("property '"+b+"' niet gevonden in object")})}else throw Error("argumenten prop en val zijn verplicht en mogen niet leeg zijn");return e},getProfilesByConditions:function(a){var b=
c.profielen;if(c.isObject(a)){for(var d in a)b=c.getProfilesByProperty(b,d,a[d].waarde,a[d].match),console.log(b.length);return b}return[]},getProfilesByConditionsFuzzy:function(a){var b=c.profielen;if(c.isObject(a)){for(var d in a)b=c.getProfilesByProperty(b,d,a[d]);return b}return[]},login:function(a,b){return c.getIdByEmailPassword(a,b)},getProfileById:function(a){return c.getProfilesByProperty(c.profielen,"_id",a)},getProfilesByVoornaam:function(a,b){var d="=";b&&!0===b&&(d="~");return c.getProfilesByProperty(c.profielen,
"voornaam",a,d)},getProfilesByFamilienaam:function(a,b){var d="=";b&&!0===b&&(d="~");return c.getProfilesByProperty(c.profielen,"familienaam",a,d)},getProfilesByNickname:function(a,b){var d="=";b&&!0===b&&(d="~");return c.getProfilesByProperty(c.profielen,"nickname",a,d)},getProfilesByBeroep:function(a,b){var d="=";b&&!0===b&&(d="~");return c.getProfilesByProperty(c.profielen,"beroep",a,d)},getProfilesBySexe:function(a){return c.getProfilesByProperty(c.profielen,"sexe",a)},getProfilesBySeksvoorkeur:function(a){return c.getProfilesByProperty(c.profielen,
"seksvoorkeur",a)},getProfilesByHaarkleur:function(a,b){var d="=";b&&!0===b&&(d="~");return c.getProfilesByProperty(c.profielen,"haarkleur",a,d)},createProfile:function(a){if(c.isObject(a)){var b={beroep:"",email:"",familienaam:"",voornaam:"",foto:"",geboortedatum:"",gewicht:0,grootte:0,haarkleur:"",nickname:"",oogkleur:"",seksvoorkeur:"",sexe:"",wachtwoord:""},d=c.genKey();b._id=d;c.mergeProfile(a,b);c.profielen.push(b);return c.getProfileById(d)}return!1},updateProfile:function(a,b){var d=c.getProfileById(a);
if(0!=d.length)return c.mergeProfile(b,d[0]),console.log("Profile '"+a+"' geupdate;"),c.getProfileById(a);console.log("_id '"+id+"' niet gevonden;");return!1},deleteProfile:function(a){var b=!1;h.each(c.profielen,function(d,e){e._id==a&&(c.profielen.splice(d,1),console.log("profiel met _id '"+a+"' werd verwijderd"),b=!0)});0==b&&console.log("profiel met _id '"+a+"' niet gevonden")},genKey:function(){return c.generateHexString(24)},generateHexString:function(a){for(var b="";b.length<a;)b+=Math.floor(16777215*
Math.random()).toString(16);return b.substring(0,a)},isObject:function(a){return a&&"object"===typeof a},isArray:function(a){return a&&"object"===typeof a&&a.constructor===Array},isNumber:function(a){return"number"===typeof a&&isFinite(a)},mergeProfile:function(a,b){if(a&&b&&c.isObject(a))for(var d in a)"_id"!=d&&b.hasOwnProperty(d)&&(b[d]=a[d]);else throw Error("mergeProfile: argumenten tekort");},enumerate:function(a){var b="";if(c.isObject(a))for(var d in a)a.hasOwnProperty(d)&&(b=c.isObject(a[d])?
b+(d+" : "+c.enumerate(a[d])):b+(" "+d+" : "+a[d]+","));else throw Error("geen object");return b},makeList:function(a,b){var d=c.isArray(b)?b:[],e=h("<ul>");h.each(d,function(a,b){e.append("<li>"+c.enumerate(b)+"</li>")});h(a).append(e)},saveProfielenToLS:function(a){}};c.init();return c}(window.jQuery);